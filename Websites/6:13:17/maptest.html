<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      Map Example
    </title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbfSBInJ4BG9Q9iqeQKuBX5sKsYt-qMsU"></script>
<style>
  #mapcanvas
  {
    height: 500px;
    background-color: #aaaaaa;
  }
</style>


</script>

  </head>
  <body>
    <h1>using google maps</h1>
    <div id="mapcanvas">

    </div>

    <script>
    var map;
    /*

      console.log("Hello World");
      var geocoder=new google.maps.Geocoder();
      var address="1313 Disneyland Dr, Anaheim, CA 92802";

      */
      if ("geolocation" in navigator)
      {
        navigator.geolocation.getCurrentPosition(positionCallback)
      }
      function positionCallback(position)
      {
        console.log("addressCallback")
        var location=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

          var mapDiv=document.getElementById("mapcanvas");
          var mapOptions = {
            zoom: 12,
            center: location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };

          map=new google.maps.Map(mapDiv,mapOptions);

          var geocoder=new google.maps.Geocoder();
          var address="1200 West Geronimo Place, Chandler AZ";
          var geocodeOptions= {
            address: address
          }
          geocoder.geocode(geocodeOptions, showAddress);
        }

        function showAddress(results,status)
        {
          if(status==google.maps.GeocoderStatus.OK)
          {
            console.log("showAddress, ok");
            var location=results[0].geometry.location;

            var markerOptions={
              position: location,
              map: map,
              title:"Chase Field",
              clickable: true
            }
            var marker=new google.maps.Marker(markerOptions);
          }
        }

      function addressCallback(results,status)
      {
        if(status==google.maps.GeocoderStatus.OK)
        {
          var location=results[0].geometry.location;

          var mapDiv=document.getElementById("mapcanvas");
          var mapOptions = {
            zoom: 15,
            center: location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };

          map=new google.maps.Map(mapDiv,mapOptions);
        }
      }
    </script>

    <p><a href="index.html">Return to my homepage</a></p>


  </body>

</html>
